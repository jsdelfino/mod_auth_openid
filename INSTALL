Basic Installation
==================

First, you'll need a few prerequisites.
 - libopkele from http://kin.klever.net/libopkele/
	It's a C++ implementation of important OpenID functions.
 - libdb_cxx from http://www.oracle.com/database/berkeley-db/db
	Berkeley DB C++ libs (now owned by Oracle)

Next, run:
$> ./configure
or 
$> ./configure --help
to see additional options that can be specified.

Next, run:
$> make

Do NOT run "make install".  You should use Apache 2's apxs program to install 
the mod_auth_openid module.  Do this by running:
$> /path/to/root/apache2/bin/apxs -i -a -n 'authopenid' libmodauthopenid.la

You will probably have to be root.

Make sure that the file /tmp/mod_auth_openid.db is owned by the user running Apache.
You can do this by (assuming www-data is the user running apache):
$> su root
$> touch /tmp/mod_auth_openid.db
$> chown www-data /tmp/mod_auth_openid.db

Or you can specify an alternate location that the user running apache has write 
privieges on (see AuthOpenIDDBLocation below).


Usage
==================

In either a Directory, Location, or File directive in httpd.conf, place the following directive:

AuthOpenIDEnabled        On

There are also two additional, optional directives:

AuthOpenIDDBLocation     /some/location/my_file.db
AuthOpenIDTrusted        http://myopenid.com http://someprovider.com 
AuthOpenIDUseCookie      Off

AuthOpenIDDBLocation: This is an optional directive. It specifies the place the BDB file should 
be stored; it defaults to /tmp/mod_auth_openid.db.

AuthOpenIDTrusted: This is an optional directive. If specified, only users using the providers 
listed will be allowed to authenticate. There should be no trailing slashes.

AuthOpenIDUseCookie: This is an optional directive. If "Off", then a session cookie will not be 
set on the client upon successful authentication. The page will load once; if reloaded or if 
the user visits it again it will ask the user to reauthenticate.

The user's identity URL will be available in the REMOTE_USER cgi environment variable after 
authentication.

See http://www.butterfat.net/wiki/Projects/ModAuthOpenID for more information.